---
title: API Reference
description: Access API at `http://localhost:8080/api/v1`.
navigation:
    icon: i-hugeicons:source-code-square
---

The API can be accessed at `http://localhost:8080/api/v1`, through IP, or dxflow.ai proxy from a remote device, when the dxflow engine is running. The API provides endpoints for managing workflows, files, shells, and other resources. You can use tools like `curl` or Postman to interact with the API.


:::code-group

```bash [bash]
pnpm add @nuxt/ui-pro@next
```

```bash [Python]
yarn add @nuxt/ui-pro@next
```

:::


## Authentication Guide

### Request a Challenge
- **Method:** GET
- **Endpoint:** `/api/auth/challenge/`
- **Description:** Initiate the authentication process. On success, you'll receive a JSON response containing:
    - `identity`: Your identifier.
    - `nounce`: A unique challenge string.
    - `lifetime`: Duration for the challenge's validity.

**Example:**
``` bash
curl http://localhost/api/auth/challenge/
```
---

### Verify the Challenge
- **Method:** POST
- **Endpoint:** `/api/auth/verify/`
- **Content-Type:** `application/json`
- **Description:** Submit your response to the issued challenge. A successful verification returns:
    - `token`: A JWT token to use as your authentication credential.
    - `permissions`: An array of permissions (e.g., `MASTER`, `SHELL`, others).
    - `expires_at`: A timestamp (int64) indicating when the token expires.

**Example:**
``` bash
curl -X POST -H "Content-Type: application/json" \
-d '{"challenge_response": "your_response_data"}' \
http://localhost/api/auth/verify/
```

### Inspect the Authentication Token
- **Method:** GET
- **Endpoint:** `/api/auth/inspect/`
- **Description:** Validate your authentication token. Include your token as a Bearer token in the `Authorization` header. A status code of 202 indicates a valid token.

**Example:**
``` bash
curl -H "Authorization: Bearer <your_token>" http://localhost/api/auth/inspect/
```

## Key Management

### List Keys
- **Method:** GET
- **Endpoint:** `/api/auth/key/`
- **Parameters:**
    - Query parameter: `all` (optional)
- **Description:** Retrieve the list of authorized keys. On success, the response will include an array of key objects containing:
    - `identity`: Identifier for the key.
    - `key`: Key string.
    - `permissions`: An array of permission strings.
    - `disabled`: A boolean indicating if the key is disabled.
    - `created_at`: ISO formatted timestamp.

**Example:**
``` bash
curl http://localhost/api/auth/key/?all=
```
---

### Register a Key
- **Method:** POST
- **Endpoint:** `/api/auth/key/`
- **Content-Type:** `application/json`
- **Description:** Register a new key. Provide a JSON payload with:
    - `identity`: Identifier to associate with the key.
    - `permissions`: An array of permission strings.

**Example:**
```bash
curl -X POST -H "Content-Type: application/json" \
-d '{"identity": "your_identity", "permissions": ["PERMISSION1", "PERMISSION2"]}' \
http://localhost/api/auth/key/
```
---

### Unregister a Key
- **Method:** DELETE
- **Endpoint:** `/api/auth/key/`
- **Content-Type:** `application/json`
- **Description:** Unregister an existing key. Provide a JSON payload identifying the key to remove (e.g., via its `identity`).

**Example:**
```bash
curl -X DELETE -H "Content-Type: application/json" \
-d '{"identity": "your_identity"}' \
http://localhost/api/auth/
```
## Engine Management

### Healthcheck
- **Method:** GET
- **Endpoint:** `/api/engine/healthcheck/`
- **Description:** Check the engine's health status. On success, you'll receive a JSON response confirming that the engine is healthy.

**Example:**
```bash
curl http://localhost/api/engine/healthcheck/
```
---

### Ping
- **Method:** GET
- **Endpoint:** `/api/engine/ping/`
- **Parameters:**
    - Query parameter: `count` (optional; defines the number of ping requests)
- **Description:** Send ping requests to the engine. A successful response returns a JSON array with integer values representing the ping responses.

**Example:**
```bash
curl http://localhost/api/engine/ping/?count=5
```

### Restart Engine
- **Method:** PUT
- **Endpoint:** `/api/engine/restart/`
- **Description:** Initiate the engine restart procedure. On success, you'll receive a JSON response confirming that the engine restart has been initiated.

**Example:**
```bash
curl -X PUT http://localhost/api/engine/restart/
```


### Endpoint Overview

- **Description:** Initiate a restart of the dxflow engine.
- **Method:** PUT
- **Endpoint:** http://localhost/api/engine/restart/
- **Authentication:** Inherits the current authentication credentials via Bearer token.

### API Request JSON Configuration

```json
{
    "v": 8,
    "id": "cmd1rg0e72ll1vw1aog89a9wi",
    "name": "Engine Management",
    "folders": [],
    "requests": [
        {
            "v": "14",
            "name": "restart",
            "method": "PUT",
            "endpoint": "http://localhost/api/engine/restart/",
            "params": [],
            "headers": [],
            "preRequestScript": "",
            "testScript": "",
            "auth": {
                "authType": "inherit",
                "authActive": true
            },
            "body": {
                "contentType": null,
                "body": null
            },
            "requestVariables": [],
            "responses": {
                "Engine restart initiated": {
                    "name": "Engine restart initiated",
                    "originalRequest": {
                        "v": "5",
                        "name": "restart",
                        "method": "PUT",
                        "endpoint": "http://localhost/api/engine/restart/",
                        "headers": [],
                        "params": [],
                        "body": {
                            "contentType": null,
                            "body": null
                        },
                        "auth": {
                            "authType": "bearer",
                            "token": "",
                            "authActive": true
                        },
                        "requestVariables": []
                    },
                    "status": "OK",
                    "code": 200,
                    "headers": [
                        {
                            "key": "content-type",
                            "value": "application/json"
                        }
                    ],
                    "body": "{\"schema\":{\"type\":\"string\"}}"
                }
            }
        }
    ],
    "auth": {
        "authType": "inherit",
        "authActive": true
    },
    "headers": [],
    "_ref_id": "coll_md24hb5m_728cc125-5dbb-4c25-aade-86832744a3e4"
}
```

### Usage Example

To trigger the engine restart, you can issue the following command:

```bash
curl -X PUT http://localhost/api/engine/restart/
```

On success, the engine will initiate a restart, and you will receive a JSON response indicating that the restart has been initiated.

## Object Management API Reference

This section documents endpoints for managing filesystem objects such as listing, creating, deleting, uploading, downloading, renaming, zipping, unzipping, sharing, and batch deletion.

---

### List Filesystem Objects

- **Method:** GET
- **Endpoint:** `/api/object/fs/`
- **Parameters:**
    - `directory` (query)
    - `all` (query)
    - `pattern` (query)
    - `depth` (query)
    - `offset` (query)
    - `limit` (query)

**Description:**
Retrieve an array of filesystem objects. Each object typically includes properties like `identity`, `name`, `permission`, `size`, and `modified_at` (UNIX timestamp).

**Example:**
```bash
curl "http://localhost/api/object/fs/?directory=path/to/dir&all=true"
```
---

### Create Filesystem Object

- **Method:** POST
- **Endpoint:** `/api/object/fs/`
- **Content-Type:** `application/json`

**Description:**
Register or create a new filesystem object. Provide the necessary JSON payload structure.

**Example:**
```bash
curl -X POST -H "Content-Type: application/json" -d '{"name": "new_object", "permission": "read"}' http://localhost/api/object/fs/
```
---

### Delete Filesystem Object

- **Method:** DELETE
- **Endpoint:** `/api/object/fs/`
- **Content-Type:** `application/json`

**Description:**
Remove an existing filesystem object by providing its identifier within a JSON payload.

**Example:**
```bash
curl -X DELETE -H "Content-Type: application/json" -d '{"identity": "object_id"}' http://localhost/api/object/fs/
```
---

### Upload Filesystem Object

- **Method:** PUT
- **Endpoint:** `/api/object/fs/upload/`
- **Content-Type:** `application/octet-stream`
- **Parameters:**
    - `identity` (query)
    - `force` (query)

**Description:**
Upload a file stream to create or replace a filesystem object. Use query parameters to specify the target identity and whether to force the upload.

**Example:**
```bash
curl -X PUT --data-binary "@file.bin" "http://localhost/api/object/fs/upload/?identity=object_id&force=true"
```
---

### Upload Pre-signed Filesystem Object

- **Method:** PUT
- **Endpoint:** `/api/object/fs/presigned/upload/`
- **Content-Type:** `application/octet-stream`
- **Parameter:**
    - `signature` (query)

**Description:**
Upload a file using a pre-generated signature. No authentication is required.

**Example:**
```bash
curl -X PUT --data-binary "@file.bin" "http://localhost/api/object/fs/presigned/upload/?signature=your_signature"
```
---

### Download Filesystem Object

- **Method:** GET
- **Endpoint:** `/api/object/fs/download/`
- **Parameter:**
    - `identity` (query)

**Description:**
Download a file corresponding to a filesystem object. The response is delivered with a binary content type.

**Example:**
```bash
curl "http://localhost/api/object/fs/download/?identity=object_id" --output downloaded_file.bin
```
---

#### Download Pre-signed Filesystem Object

- **Method:** GET
- **Endpoint:** `/api/object/fs/presigned/download/`
- **Parameter:**
    - `signature` (query)

**Description:**
Download a file using a pre-approved signature. No authentication is needed.

**Example:**
```
curl "http://localhost/api/object/fs/presigned/download/?signature=your_signature" --output downloaded_file.bin
```
---

### Rename Filesystem Object

- **Method:** PUT
- **Endpoint:** `/api/object/fs/rename/`
- **Content-Type:** `application/json`

**Description:**
Rename a filesystem object by providing a payload that includes the current `identity` and a `new_identity`.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" -d '{"identity": "old_name", "new_identity": "new_name"}' http://localhost/api/object/fs/rename/
```
---

### Zip Filesystem Object

- **Method:** PUT
- **Endpoint:** `/api/object/fs/zip/`
- **Content-Type:** `application/json`

**Description:**
Compress one or more filesystem objects. The JSON payload should include necessary details, and the response provides a destination path.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" -d '{"identity": "folder_id", "destination": "archive.zip"}' http://localhost/api/object/fs/zip/
```
---

### Unzip Filesystem Object

- **Method:** PUT
- **Endpoint:** `/api/object/fs/unzip/`
- **Content-Type:** `application/json`

**Description:**
Extract a zipped filesystem object. The JSON payload should specify the source and optionally the destination path.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" -d '{"identity": "archive.zip", "destination": "extracted_folder"}' http://localhost/api/object/fs/unzip/
```
---

### Share Filesystem Object

- **Method:** PUT
- **Endpoint:** `/api/object/fs/share/`
- **Content-Type:** `application/json`

**Description:**
Share one or more filesystem objects. The payload usually details which objects to share. The response returns an array containing sharing signatures along with expiry details.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" -d '{"identities": ["object_id1", "object_id2"]}' http://localhost/api/object/fs/share/
```
---

### Batch Delete Filesystem Objects

- **Method:** DELETE
- **Endpoint:** `/api/object/fs/batch/`
- **Content-Type:** `application/json`

**Description:**
Delete multiple filesystem objects in a single request. The JSON payload should list the identifiers of objects to remove. The response indicates the deletion status for each.

**Example:**
```bash
curl -X DELETE -H "Content-Type: application/json" -d '{"identities": ["object_id1", "object_id2"]}' http://localhost/api/object/fs/batch/
```
## Shell Management API Reference

This section explains the endpoints used for managing shell sessions. The endpoints allow you to list existing shells, create new ones, remove shells (individually or in batches), connect to shells via WebSocket, resize shell dimensions, execute commands, and kill shells. Use these API calls to efficiently manage shell resources within your system.

---

### List Shells

- **Method:** GET
- **Endpoint:** `/api/shell/`
- **Parameters:**
        - `offset` (query; for pagination; specifies the start index)
        - `limit` (query; for pagination; specifies the number of items to return)
- **Description:**
        Retrieves a list of active shell sessions including details like the shell's identity, command path, arguments, current state, terminal dimensions (columns and rows), session count, and creation timestamp.

**Example:**
```bash
curl "http://localhost/api/shell/?offset=0&limit=10"
```
---

### Create Shell

- **Method:** POST
- **Endpoint:** `/api/shell/`
- **Content-Type:** `application/json`
- **Description:**
        Creates a new shell session. Provide a JSON payload with configuration settings (for example, the command to run and optional arguments). On success, the API returns details of the created shell.

**Example:**
```bash
curl -X POST -H "Content-Type: application/json" \
-d '{"config": {"command": "/bin/bash", "args": ["-l"]}}' \
http://localhost/api/shell/
```
---

### Remove Shell

- **Method:** DELETE
- **Endpoint:** `/api/shell/`
- **Content-Type:** `application/json`
- **Description:**
        Removes an active shell session. Specify the shell's identifier in the JSON payload.

**Example:**
```bash
curl -X DELETE -H "Content-Type: application/json" \
-d '{"identity": "shell_id"}' \
http://localhost/api/shell/
```
---

### Connect to Shell

- **Method:** GET
- **Endpoint:** `/api/shell/<<identity>>/`
- **Description:**
        Establishes a WebSocket connection to the specified shell session. Replace `<<identity>>` with the desired shell’s identifier. A successful request upgrades the protocol to WebSocket.

**Example:**
```bash
curl -i -N -H "Connection: Upgrade" -H "Upgrade: websocket" \
http://localhost/api/shell/shell_id/
```
---

### Resize Shell

- **Method:** PUT
- **Endpoint:** `/api/shell/resize/`
- **Content-Type:** `application/json`
- **Description:**
        Adjusts the dimensions of an active shell session. Include the shell identity along with new `columns` and `rows` values in the JSON payload.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "shell_id", "columns": 120, "rows": 30}' \
http://localhost/api/shell/resize/
```
---

### Execute Shell Command

- **Method:** PUT
- **Endpoint:** `/api/shell/execute/`
- **Content-Type:** `application/json`
- **Description:**
        Executes a specific command within an active shell session. Provide the shell identifier and the command to run in the JSON payload.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "shell_id", "command": "ls -la"}' \
http://localhost/api/shell/execute/
```
---

### Kill Shell

- **Method:** PUT
- **Endpoint:** `/api/shell/kill/`
- **Content-Type:** `application/json`
- **Description:**
        Terminates a specific shell session. Provide the shell's identifier within the JSON payload.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "shell_id"}' \
http://localhost/api/shell/kill/
```
---

### Batch Remove Shells

- **Method:** DELETE
- **Endpoint:** `/api/shell/batch/`
- **Content-Type:** `application/json`
- **Description:**
        Deletes multiple shell sessions in one request. Provide an array of shell identities in the JSON payload to remove them in batch.

**Example:**
```bash
curl -X DELETE -H "Content-Type: application/json" \
-d '{"identities": ["shell_id1", "shell_id2"]}' \
http://localhost/api/shell/batch/
```
By using the endpoints above, you have complete control over shell session management, including monitoring, configuration changes, and cleanup operations.

### Stop Compose Workflow

- **Method:** PUT
- **Endpoint:** `/api/workflow/compose/stop/`
- **Content-Type:** `application/json`
- **Description:**
Stop a running compose workflow. Upon success, the API returns a status confirmation.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id"}' \
http://localhost/api/workflow/compose/stop/
```
---

### Pause Compose Workflow

- **Method:** PUT
- **Endpoint:** `/api/workflow/compose/pause/`
- **Content-Type:** `application/json`
- **Description:**
Pause an active compose workflow without stopping it completely. A confirmation in JSON is returned on success.

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id"}' \
http://localhost/api/workflow/compose/pause/
```
---
## Compose Workflow Management REST API

The Compose Workflow REST API allows you to stop, pause, unpause, execute commands on, and kill compose workflows. All endpoints are hosted under the `/api/workflow/compose/` route on the dxflow server.

### Table of Contents

- [Stop Compose Workflow](#stop-compose-workflow)
- [Pause Compose Workflow](#pause-compose-workflow)
- [Unpause Compose Workflow](#unpause-compose-workflow)
- [Execute Compose Workflow](#execute-compose-workflow)
- [Kill Compose Workflow](#kill-compose-workflow)

---

### Stop Compose Workflow

**Endpoint:** `/api/workflow/compose/stop/`
**Method:** `PUT`
**Content-Type:** `application/json`

Stops a running compose workflow. Returns a JSON confirmation on success.

**Request Body:**
| Field     | Type   | Description                |
|-----------|--------|---------------------------|
| identity  | string | Workflow identifier (required) |

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id"}' \
http://localhost/api/workflow/compose/stop/
```

---

### Pause Compose Workflow

**Endpoint:** `/api/workflow/compose/pause/`
**Method:** `PUT`
**Content-Type:** `application/json`

Pauses an active compose workflow without stopping it completely. Returns a JSON confirmation.

**Request Body:**
| Field     | Type   | Description                |
|-----------|--------|---------------------------|
| identity  | string | Workflow identifier (required) |

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id"}' \
http://localhost/api/workflow/compose/pause/
```

---

### Unpause Compose Workflow

**Endpoint:** `/api/workflow/compose/unpause/`
**Method:** `PUT`
**Content-Type:** `application/json`

Resumes a paused workflow. Returns a JSON confirmation.

**Request Body:**
| Field     | Type   | Description                |
|-----------|--------|---------------------------|
| identity  | string | Workflow identifier (required) |

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id"}' \
http://localhost/api/workflow/compose/unpause/
```

---

### Execute Compose Workflow

**Endpoint:** `/api/workflow/compose/execute/`
**Method:** `PUT`
**Content-Type:** `application/json`

Executes a command on the given compose workflow. Useful for triggering actions or updating configurations dynamically.

**Request Body:**
| Field     | Type   | Description                |
|-----------|--------|---------------------------|
| identity  | string | Workflow identifier (required) |
| command   | string | Command to execute (required)  |

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id", "command": "your_command"}' \
http://localhost/api/workflow/compose/execute/
```

---

### Kill Compose Workflow

**Endpoint:** `/api/workflow/compose/kill/`
**Method:** `PUT`
**Content-Type:** `application/json`

Forcefully terminates a compose workflow that is not responding to normal stop commands. Returns a JSON confirmation.

**Request Body:**
| Field     | Type   | Description                |
|-----------|--------|---------------------------|
| identity  | string | Workflow identifier (required) |

**Example:**
```bash
curl -X PUT -H "Content-Type: application/json" \
-d '{"identity": "workflow_id"}' \
http://localhost/api/workflow/compose/kill/
```
