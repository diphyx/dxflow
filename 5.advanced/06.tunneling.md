---
title: Tunneling
description: Create secure tunnels and proxy connections for exposing local services through WebSocket bridges
navigation:
    icon: i-hugeicons:black-hole-01
---

dxflow provides powerful tunneling capabilities through its proxy-bridge architecture, enabling you to expose local services securely over WebSocket connections with automatic subdomain allocation.

::callout{color="blue"}
**Secure Access**: dxflow tunneling uses authenticated WebSocket connections to route traffic between proxy hubs and bridge nodes, enabling secure access to local services from anywhere.
::

## Architecture Overview

### Core Concepts

dxflow tunneling uses a sophisticated proxy-bridge architecture with WebSocket tunnels:

::card-group
  ::card{title="Proxy Mode (Hub)" icon="i-hugeicons:black-hole-01"}
  **Central Traffic Router**
  - Provides subdomain allocation to bridge instances
  - Routes incoming traffic via WebSocket tunnels
  - Manages authentication and traffic limitations
  - Maintains connection pools for efficient handling
  - Uses 12-byte identity system for routing
  ::

  ::card{title="Bridge Mode (Node)" icon="i-hugeicons:activity-02"}
  **Local Service Gateway**
  - Connects to proxy hub to obtain subdomain
  - Establishes bidirectional WebSocket tunnel
  - Routes traffic between hub and local services
  - Handles automatic reconnection and recovery
  - Validates upstream must be private IP
  ::
::

### Identity System

Every proxy and bridge connection uses a unique identity:

| Aspect | Description |
|--------|-------------|
| **Format** | 12-byte array (displayed as alphanumeric, e.g., `ab1234567890`) |
| **Generation** | Derived from alphanumeric string, zero-padded if needed |
| **Usage** | Subdomain allocation and routing identification |

### Traffic Flow Mechanism

**Connection Handling Process:**

```
User connects with subdomain
    ↓
UserConnection → ProxyPool.UserSide → Broadcast to Bridge → Wait for pairing
    ↓
Bridge receives broadcast
    ↓
Bridge WebSocket → Decode Identity → Create Gateway Connection → ProxyPool.BridgeSide
    ↓
Pairing and transfer
    ↓
ProxyPool pairs connections → TcpPair transfers data → Update statistics
```

**Key Components:**

| Component | Description |
|-----------|-------------|
| **Connection Pooling** | 8-second timeout window for connection pairing |
| **Bidirectional Transfer** | TCP traffic flows through WebSocket frames |
| **Traffic Statistics** | Real-time tracking of read/write bytes |
| **Hijack Detection** | Incoming connections analyzed for subdomain requests |

## Setting Up Tunnels

### Using the Default Hub

dxflow provides `dxflow.ai` as a ready-to-use public hub:

::callout{color="green"}
**Zero Setup Required**: The default hub is already running and ready to accept bridge connections. No configuration or deployment needed on your part.
::

**Hub Features:**
- **Always available** at `dxflow.ai`
- **Unlimited connections** and traffic from hub perspective
- **Automatic subdomain allocation** for each bridge
- **Managed infrastructure** - no maintenance required

### Start Your Own Proxy Hub

For private tunneling with your own infrastructure:

::callout{color="blue"}
**Enterprise Feature**: Running your own proxy hub requires a specific license. [Contact us](/docs#contact-us) for enterprise licensing and private hub deployment. Learn more about [licensing](/docs/advanced/licensing).
::

**Private Hub Benefits:**
- **Full control** over authentication and traffic limits
- **Private infrastructure** - no shared resources
- **Custom domain** and subdomain allocation

### Connect Bridge Nodes

Connect bridge nodes to expose local services:

::callout{color="amber"}
**Requires Bridge-Enabled License**: Bridge functionality is not included in the general license. You need a bridge-enabled license to connect bridge nodes. See [licensing documentation](/docs/advanced/licensing) for details.
::

```bash
# Start bridge connecting to default hub (dxflow.ai)
dxflow boot up --bridge --daemon

# Bridge receives subdomain from hub
# Default: 1 connection, 10MB traffic limit
```

### Manual Management

::tabs
  ::tab-item{label="Proxy Management" icon="i-hugeicons:black-hole-01"}
  ```bash
  # List active proxies on hub
  dxflow proxy list

  # Create new proxy allocation
  dxflow proxy create

  # Remove unused proxies
  dxflow proxy prune
  ```
  ::

  ::tab-item{label="Bridge Management" icon="i-hugeicons:activity-02"}
  ```bash
  # List bridge connections
  dxflow bridge list

  # Disconnect bridge temporarily
  dxflow bridge disconnect <identity>

  # Reconnect bridge
  dxflow bridge connect <identity>

  # Clean up inactive bridges
  dxflow bridge prune
  ```
  ::
::

## Identity System

### Unique Identifiers

Every proxy-bridge connection uses a 12-character alphanumeric identity:

| Property | Details |
|----------|---------|
| **Format** | 12-byte alphanumeric (e.g., `ab1234567890`) |
| **Usage** | Subdomain allocation and traffic routing |
| **Generation** | Automatically created during connection |

### Authentication

::card-group
  ::card{title="Proxy Credentials" icon="i-hugeicons:key-01"}
  **Auto-Generated**
  - Username: 6-character random nonce
  - Password: 24-character random nonce
  - Required for WebSocket connections
  ::

  ::card{title="Gateway Authorization" icon="i-hugeicons:shield-01"}
  **Optional Security**
  - Authorization tokens in query parameters
  - Prevents unauthorized subdomain allocation
  - Additional security layer
  ::
::

## Traffic Management

### Connection Pooling

dxflow optimizes performance through intelligent connection pooling:

- **8-second pairing window** for matching connections
- **Automatic cleanup** of unpaired connections
- **Thread-safe operations** with mutex protection
- **Connection reuse** to reduce overhead

### Default Configuration

dxflow tunneling comes with different defaults for hubs and nodes:

::tabs
  ::tab-item{label="Hub Limitations" icon="i-hugeicons:black-hole-01"}
  **dxflow.ai Hub**
  - **Default hub**: `dxflow.ai` (public)
  - **Connection limit**: Unlimited
  - **Traffic limit**: Unlimited
  - **Purpose**: Central routing for all users
  ::

  ::tab-item{label="Node Limitations" icon="i-hugeicons:activity-02"}
  **Bridge Nodes**
  - **Default connections**: 1 bridge allowed
  - **Default traffic**: 10MB limit
  - **License required**: Bridge functionality needs license
  - **General license**: Bridge feature not included
  ::
::

## Security Features

### Network Security

dxflow tunneling includes several security measures:

::card-group
  ::card{title="Upstream Validation" icon="i-hugeicons:shield-01"}
  **Private IP Only**
  - Bridge must connect to private IPs
  - Prevents exposing public services
  - Enforces local network boundaries
  ::

  ::card{title="TLS Support" icon="i-hugeicons:certificate-01"}
  **Encrypted Connections**
  - HTTPS gateway connections
  - Proper SNI handling for subdomains
  - Certificate validation for secure tunnels
  ::
::

### Protocol Security

The hijack protocol enables efficient routing:

```
<identity|fingerprint>
```

| Element | Description |
|---------|-------------|
| `identity` | 12-byte bridge identifier |
| `fingerprint` | UUID for connection tracking |

## Performance Characteristics

### Latency Comparison

| Connection Type | Characteristics |
|----------------|-----------------|
| **Direct Proxy** | Minimal overhead, production-ready, low latency |
| **Bridge Tunnel** | WebSocket overhead, development/testing scenarios |

### Traffic Statistics

::tabs
  ::tab-item{label="Proxy Hub Stats" icon="i-hugeicons:black-hole-01"}
  **Hub Metrics**
  - User traffic (incoming from internet)
  - Bridge traffic (to/from bridge nodes)
  - Format: `(↓ download) (↑ upload)`
  - Real-time bandwidth tracking
  ::

  ::tab-item{label="Bridge Node Stats" icon="i-hugeicons:activity-02"}
  **Node Metrics**
  - Gateway traffic (to/from hub)
  - Upstream traffic (to/from local service)
  - Bandwidth monitoring against limits
  - Connection timestamps
  ::
::


## Troubleshooting

### Common Issues

::tabs
  ::tab-item{label="Connection Problems" icon="i-hugeicons:settings-02"}
  **"Proxy not available"**
  - Identity doesn't exist on hub
  - Proxy was removed or never created
  - Check proxy list on hub

  **"Proxy not connected"**
  - WebSocket connection dropped
  - Network interruption occurred
  - Verify bridge status and connectivity
  ::

  ::tab-item{label="License Issues" icon="i-hugeicons:shield-01"}
  **"Bridge not allowed"**
  - General license doesn't include bridge feature
  - Bridge functionality requires specific license
  - Upgrade to bridge-enabled license (see [licensing guide](/docs/advanced/licensing))

  **"Traffic limit exceeded"**
  - 10MB default limit reached on bridge
  - License upgrade needed for higher limits (see [licensing guide](/docs/advanced/licensing))
  - Monitor traffic usage carefully
  ::
::

### Debugging Steps

1. **Enable debug logging**: `dxflow --log-level=debug boot up --proxy`
2. **Monitor connection pools**: Check pool sizes and timeout messages
3. **Track traffic stats**: Use API for real-time bandwidth monitoring
4. **Test connectivity**: Verify upstream services and WebSocket connections

## Best Practices

### Production Deployment

::card-group
  ::card{title="Security First" icon="i-hugeicons:shield-01"}
  - Use HTTPS for all gateway connections
  - Set appropriate traffic limitations
  - Rotate credentials regularly
  - Monitor traffic patterns
  ::

  ::card{title="Performance" icon="i-hugeicons:dashboard-speed-01"}
  - Tune buffer sizes for workload
  - Optimize timeout values
  - Use connection pooling effectively
  - Monitor statistics for bottlenecks
  ::

  ::card{title="Reliability" icon="i-hugeicons:checkmark-circle-02"}
  - Implement retry logic for failures
  - Monitor connection pool health
  - Set up automated cleanup tasks
  - Plan for horizontal scaling
  ::
::

## API Integration

The tunneling system provides REST APIs for programmatic control:

### Proxy Hub APIs

```bash
# List active proxies
curl http://hub/api/proxy/

# Create new proxy
curl -X POST http://hub/api/proxy/

# Remove inactive proxies
curl -X DELETE http://hub/api/proxy/prune/
```

### Bridge Node APIs

```bash
# List bridge connections
curl http://node/api/bridge/

# Reconnect specific bridge
curl -X POST http://node/api/bridge/{identity}/connect/

# Clean up inactive bridges
curl -X DELETE http://node/api/bridge/prune/
```

::callout
**Production Ready**: dxflow tunneling has been tested in production environments, providing reliable secure access to local services with automatic reconnection, traffic management, and comprehensive monitoring.
::

The tunneling architecture enables secure, scalable access to distributed services while maintaining simplicity in configuration and management.
